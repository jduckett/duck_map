<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: DuckMap::SitemapObject::ClassMethods
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../DuckMap.html" title="DuckMap (module)">DuckMap</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../SitemapObject.html" title="DuckMap::SitemapObject (module)">SitemapObject</a></span></span>
     &raquo; 
    <span class="title">ClassMethods</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: DuckMap::SitemapObject::ClassMethods
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/duck_map/sitemap_object.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#acts_as_sitemap-instance_method" title="#acts_as_sitemap (instance method)">- (Nil) <strong>acts_as_sitemap</strong>(action_name = nil, options = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Sets default values, attributes and mappings for sitemap objects.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sitemap_handler-instance_method" title="#sitemap_handler (instance method)">- (NilClass) <strong>sitemap_handler</strong>(action_name = nil, options = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Wrapper for <span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span> and accepts the same exact
arguments.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sitemap_segments-instance_method" title="#sitemap_segments (instance method)">- (NilClass) <strong>sitemap_segments</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Wrapper for <span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span> and accepts the same exact
arguments.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="acts_as_sitemap-instance_method">
  
    - (<tt>Nil</tt>) <strong>acts_as_sitemap</strong>(action_name = nil, options = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>The syntax is always the same regardless if you define acts_as_sitemap in
config/routes.rb or directly on a controller or model.</p>
</div>
  </div>


<p>Sets default values, attributes and mappings for sitemap objects.  All
SitemapObject attributes are maintained in a master Hash.  Attributes for
each action are stored in the master Hash and accessed via action_name as
the key.</p>

<p>All attributes are broken into two categories.</p>
<ul><li>
<p>Configuration level: These attributes are defined within the
config/routes.rb block and are considered global default values for ALL
sitemap related classes and objects.</p>
</li><li>
<p>Controller level: These attributes are exactly the same as Configuration
level with one difference. They apply to each controller class ONLY. 
Setting attributes at the controller level will make a copy of the
Configuration level attributes and merge with the values you pass to
<span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span>.</p>
</li></ul>

<p>When a sitemap is created or meta tag data is needed, the controller is
"asked" to provide the required data for a specific action on the
controller.  The mechanism that makes the request is called a "handler". 
Handlers are mapped to standard Rails controller actions.</p>
<ul><li>
<p>The index action is mapped to sitemap_index.</p>
</li><li>
<p>The show action is mapped to sitemap_show.</p>
</li></ul>

<p>Attributes have two meanings:</p>
<ul><li>
<p>If the attribute value is set to a Symbol, then, it is considered to point
to an attribute/method name of the target SitemapObject (self).</p>
</li><li>
<p>If the attribute value is set to anything other than a Symbol, then, the
value is used "as is".</p>
</li></ul>

<p>In the example below, we are setting meta data attributes.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>List of my pages...</span><span class='tstring_end'>&quot;</span></span>    <span class='comment'>#=&gt; static title for the index page.
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:edit</span><span class='comma'>,</span>  <span class='label'>title:</span> <span class='symbol'>:title</span>                   <span class='comment'>#=&gt; returns the value of the title attribute/method.
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:new</span><span class='comma'>,</span>   <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>New page</span><span class='tstring_end'>&quot;</span></span>               <span class='comment'>#=&gt; static title for the new page.
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:show</span><span class='comma'>,</span>  <span class='label'>title:</span> <span class='symbol'>:title</span>                   <span class='comment'>#=&gt; returns the value of the title attribute/method.</span></code></pre>

<p>Here, we are setting sitemap attributes.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>always</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>   <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:edit</span><span class='comma'>,</span>  <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>never</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.0</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:new</span><span class='comma'>,</span>   <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>never</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>    <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>0.0</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:show</span><span class='comma'>,</span>  <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>monthly</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>7.0</span><span class='tstring_end'>&quot;</span></span>

<span class='comment'># here we are telling ALL handlers to get the last modified date
</span><span class='comment'># for a sitemap and meta tag from 
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='label'>lastmod:</span> <span class='symbol'>:last_updated_at</span></code></pre>

<p>The sitemap / meta tag <span class='object_link'><a href="../Handlers.html" title="DuckMap::Handlers (module)">handlers</a></span> will attempt to extract
attributes values from the first model found on a controller.  To make
meeting special needs a little easier, you can use a block to return a
single model or an Array of model objects to include in your sitemap.</p>

<p>This example is worth a few extra words.</p>
<ul><li>
<p>When building a sitemap for the index action of a controller, you only need
to build one url.</p>
</li><li>
<p>When building a sitemap for the show action of a controller, you will
typically need to build an entire set of urls to represent the rows in your
table.  However, when showing the meta tag data, you will need the
attributes from the specific model for the current page.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span> <span class='kw'>do</span>
  <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my latest book</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:show</span> <span class='kw'>do</span>
  <span class='const'>Book</span><span class='period'>.</span><span class='id identifier rubyid_all'>all</span>
<span class='kw'>end</span></code></pre>
</li></ul>

<p>Let's say you the show action of your controller just won't fit into the
standard behavior and you need to build the url using a custom method. 
Simply build the method on your object and point to it.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:show</span><span class='comma'>,</span> <span class='label'>canonical:</span> <span class='symbol'>:my_special_method</span></code></pre>

<p>The full syntax would include handlers and segments.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My App</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                        <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>always</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                        <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                        <span class='label'>handler:</span> <span class='lbrace'>{</span><span class='label'>action_name:</span> <span class='symbol'>:my_index</span><span class='comma'>,</span> <span class='label'>first_model:</span> <span class='kw'>false</span><span class='rbrace'>}</span><span class='comma'>,</span>
                        <span class='label'>segments:</span> <span class='lbrace'>{</span><span class='label'>id:</span> <span class='symbol'>:my_id</span><span class='comma'>,</span> <span class='label'>sub_id:</span> <span class='symbol'>:belongs_to_id</span><span class='rbrace'>}</span></code></pre>

<p>However, there are convenience methods to make things a little cleaner.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span>  <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>title:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>My App</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>changefreq:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>always</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='label'>priority:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0</span><span class='tstring_end'>&quot;</span></span>
<span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span>  <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>action_name:</span> <span class='symbol'>:my_index</span><span class='comma'>,</span> <span class='label'>first_model:</span> <span class='kw'>false</span>
<span class='id identifier rubyid_sitemap_segments'>sitemap_segments</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='symbol'>:my_id</span><span class='comma'>,</span> <span class='label'>sub_id:</span> <span class='symbol'>:belongs_to_id</span></code></pre>

<p>So far, we have only discussed the attributes that are used by the standard
<span class='object_link'><a href="../Handlers.html" title="DuckMap::Handlers (module)">handlers</a></span>.  However, you do have the option of building
and using your own handlers to meet special needs or to completely change
the default behavior of ALL handlers.  Let's say the default behavior for
the <span class='object_link'><a href="../Handlers/Index.html" title="DuckMap::Handlers::Index (module)">index handler</a></span> does not meet your needs.  You
could build your own index handler and set it in the config/routes.rb</p>

<pre class="code ruby"><code><span class='const'>MyApp</span><span class='op'>::</span><span class='const'>Application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_draw'>draw</span> <span class='kw'>do</span>

  <span class='comment'># defining attributes in config/routes.rb are used globally
</span>  <span class='comment'># your action handler method will be used throughout the entire app.
</span>  <span class='comment'># simply create your own handler method and make it accessible to every controller
</span>  <span class='comment'># in your app.  Maybe include in your ApplicationController or something.
</span>  <span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>action_name:</span> <span class='symbol'>:my_index</span>

<span class='kw'>end</span></code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>action_name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The action name is used as a key when looking for attributes. When sitemap
or meta tag needs data for the index action it will use :index as the key. 
Omitting the action_name will default to :all which will assign the values
you pass to "all" actions for the controller.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Options hash.</p>
<ul><li>
<p>Setting to a Symbol will attempt to access attribute method name on the
SitemapObject itself.</p>
</li><li>
<p>Setting to any value other than a Symbol will use that value "as is".</p>
</li></ul>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>block</span>
      
      
        <span class='type'>(<tt>Block</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A block to assign to all handlers associated with action_name.  The block
should return an Array of ActiveRecord::Base models.  The model objects
server as sitemap content for the given action name.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:canonical</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: nil</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:canonical_host</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: nil</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:changefreq</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Valid static values are:</p>
<ul><li>
<p>always</p>
</li><li>
<p>hourly</p>
</li><li>
<p>daily</p>
</li><li>
<p>weekly</p>
</li><li>
<p>monthly</p>
</li><li>
<p>yearly</p>
</li><li>
<p>never</p>
</li></ul>
</div>
          
        </li>
      
        <li>
          <span class="name">:description</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: :description</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:handler</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Sub-hash containing attributes for the handler.  See <span class='object_link'><a href="#sitemap_handler-instance_method" title="DuckMap::SitemapObject::ClassMethods#sitemap_handler (method)">sitemap_handler</a></span></p>
</div>
          
        </li>
      
        <li>
          <span class="name">:keywords</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: :keywords</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:lastmod</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: :updated_at</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:priority</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Valid static values range from 0.0 to 1.0</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:segments</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Sub-hash containing attributes for the segments.  See segments_handler</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:title</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: :title</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:url_format</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: "html"</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:url_limit</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Default value: 50000</p>
</div>
          
        </li>
      
    </ul>
  
    
    

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/duck_map/sitemap_object.rb', line 143</span>

<span class='kw'>def</span> <span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='symbol'>:all</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes_defined'>sitemap_attributes_defined</span> <span class='op'>=</span> <span class='kw'>true</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span>

    <span class='kw'>elsif</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># delete method should always return nil if the key doesn't exist
</span>  <span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:handler</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_segments'>segments</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:segments</span><span class='rparen'>)</span>

  <span class='comment'># i'm going to verify and set a default anyway
</span>  <span class='id identifier rubyid_handler'>handler</span> <span class='op'>=</span> <span class='id identifier rubyid_handler'>handler</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_handler'>handler</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id identifier rubyid_segments'>segments</span> <span class='op'>=</span> <span class='id identifier rubyid_segments'>segments</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_segments'>segments</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># build a list of keys to work on
</span>  <span class='comment'># developer can specify :all, which will build a list of all the existing keys in the Hash
</span>  <span class='comment'># otherwise, it will just use the key passed to acts_as_sitemap
</span>  <span class='id identifier rubyid_keys'>keys</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_key'>key</span> <span class='op'>==</span> <span class='symbol'>:all</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pair'>pair</span><span class='op'>|</span> <span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_pair'>pair</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># process all of the keys in the list.
</span>  <span class='id identifier rubyid_keys'>keys</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_key'>key</span><span class='op'>|</span>

    <span class='comment'># create defaults unless they exist
</span>    <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:segments</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:segments</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='kw'>end</span>

    <span class='comment'># merge the main hash.
</span>    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>

    <span class='comment'># merge the handler
</span>    <span class='comment'>#unless handler.blank?
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_handler'>handler</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>

      <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

        <span class='id identifier rubyid_handler'>handler</span><span class='lbracket'>[</span><span class='symbol'>:block</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_block'>block</span>
      <span class='kw'>end</span>

      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_handler'>handler</span><span class='rparen'>)</span>

    <span class='kw'>end</span>

    <span class='comment'># merge the segments
</span>    <span class='kw'>unless</span> <span class='id identifier rubyid_segments'>segments</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

      <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lbracket'>[</span><span class='id identifier rubyid_key'>key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:segments</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_merge!'>merge!</span><span class='lparen'>(</span><span class='id identifier rubyid_segments'>segments</span><span class='rparen'>)</span>

    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sitemap_handler-instance_method">
  
    - (<tt>NilClass</tt>) <strong>sitemap_handler</strong>(action_name = nil, options = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>See <span class='object_link'><a href="../Handlers.html" title="DuckMap::Handlers (module)">Handlers</a></span> for specific details on how each one of these
attributes are utilized by each handler.</p>
</div>
  </div>


<p>Wrapper for <span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span> and accepts the same exact
arguments. Basically, sitemap_handler simplifies the syntax needed to
define a handler for all or a specific action.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>action_name:</span> <span class='symbol'>:my_index</span><span class='comma'>,</span> <span class='label'>first_model:</span> <span class='kw'>false</span>

<span class='comment'># is equivalent to:
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>handler:</span> <span class='lbrace'>{</span><span class='label'>action_name:</span> <span class='symbol'>:my_index</span><span class='rbrace'>}</span>

<span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>instance_var:</span> <span class='symbol'>:my_var</span>
<span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>instance_var:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_var</span><span class='tstring_end'>&quot;</span></span>

<span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>model:</span> <span class='const'>Book</span>
<span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>model:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Book</span><span class='tstring_end'>&quot;</span></span></code></pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>action_name</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The action name.  See <span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span></p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Options hash.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:action_name</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The method name to call.  Method name MUST exist on your object!</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:first_model</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>Boolean.  Tells the handler to get values from the first available model
object found on the controller.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:instance_var</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>The model</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:model</span>
          <span class="type">(<tt>Symbol</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>A model object expressed as a String or an actual class reference. See
<span class='object_link'><a href="../Handlers.html" title="DuckMap::Handlers (module)">Handlers</a></span> for details on how this attribute is utilized.</p>
</div>
          
        </li>
      
    </ul>
  
    
    


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>NilClass</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


255
256
257
258
259
260</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/duck_map/sitemap_object.rb', line 255</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sitemap_handler'>sitemap_handler</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='op'>:</span> <span class='symbol'>:all</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>handler:</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="sitemap_segments-instance_method">
  
    - (<tt>NilClass</tt>) <strong>sitemap_segments</strong>(*args, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Wrapper for <span class='object_link'><a href="#acts_as_sitemap-instance_method" title="DuckMap::SitemapObject::ClassMethods#acts_as_sitemap (method)">acts_as_sitemap</a></span> and accepts the same exact
arguments. Basically, sitemap_segments simplifies the syntax needed to
define segments for all or a specific action.</p>

<pre class="code ruby"><code><span class='id identifier rubyid_sitemap_segments'>sitemap_segments</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>id:</span> <span class='symbol'>:my_id</span>

<span class='comment'># is equivalent to:
</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span> <span class='symbol'>:index</span><span class='comma'>,</span> <span class='label'>segments:</span> <span class='lbrace'>{</span><span class='label'>id:</span> <span class='symbol'>:my_id</span><span class='rbrace'>}</span></code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>NilClass</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


273
274
275
276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/duck_map/sitemap_object.rb', line 273</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sitemap_segments'>sitemap_segments</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_key'>key</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='op'>:</span> <span class='symbol'>:all</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_shift'>shift</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_args'>args</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span> <span class='op'>:</span> <span class='id identifier rubyid_options'>options</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_acts_as_sitemap'>acts_as_sitemap</span><span class='lparen'>(</span><span class='id identifier rubyid_key'>key</span><span class='comma'>,</span> <span class='label'>segments:</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Feb 16 08:39:24 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>