<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: DuckMap::Handlers::Show
  
    &mdash; Documentation by YARD 0.8.3
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../DuckMap.html" title="DuckMap (module)">DuckMap</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Handlers.html" title="DuckMap::Handlers (module)">Handlers</a></span></span>
     &raquo; 
    <span class="title">Show</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: DuckMap::Handlers::Show
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1">ActiveSupport::Concern</dd>
      
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/duck_map/handlers/show.rb</dd>
  
</dl>
<div class="clear"></div>








  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sitemap_show-instance_method" title="#sitemap_show (instance method)">- (Array) <strong>sitemap_show</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Default handler method for show actions.</p>
</div></span>
  
</li>

      
    </ul>
  


  

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="sitemap_show-instance_method">
  
    - (<tt>Array</tt>) <strong>sitemap_show</strong>(options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Default handler method for show actions.</p>

<p>The source of a request for data can be from two sources.</p>
<ul><li>
<p>sitemap requesting url nodes for a given route.</p>
</li><li>
<p>meta tag requesting data for HEAD section meta tags.</p>
</li></ul>

<p>This method will return an Array of Hashes that represent url nodes of a
sitemap.  Also, sitemap_meta_data is populated with a single Hash for meta
tags.  So, this is considered a shared method.</p>

<p>The basic procedure is as follows:</p>
<ul><li>
<p>default values are obtained from <span class='object_link'><a href="../Config.html" title="DuckMap::Config (class)">Config</a></span> and stored in a return
Hash.</p>
</li><li>
<p>the controller "show" action method is never called as it is not needed.</p>
<ul><li>
<p>if the request is a meta tag, then, the show method has already been
called.</p>
</li><li>
<p>if the request is a sitemap, then, we would looking for a list of rows
instead of just one row, because, a show route would always be pointing to
a single item and the sitemap would want to show all of those items or at
least a defined list of them.</p>
</li></ul>
</li><li>
<p>static last-modified date is obtained from config/locales/sitemap.yml</p>
</li><li>
<p>sitemap_capture_attributes is called directly on the controller.  Any
values are merged with the return Hash.</p>
</li><li>
<p>now, the processing splits based on the type of request.</p>
</li><li>
<p>if meta tag</p>
<ul><li>
<p>first model object automagically found on the controller unless
"first_model" has been set to false, find the first instance of a model
object on the controller and use it as the data source for values.</p>
</li><li>
<p>unless a canonical url has been obtained during any of the preceding steps,
build the canonical url based on the route and data source object found
during preceding steps.  the segment keys are NOT processed as the values
should be automagically part of the url building since this is being called
as part of an HTTP request.  The segment key should simply already be
there.</p>
</li><li>
<p>add the return Hash to the return Array and set the meta tag instance
variable.</p>
</li></ul>
</li><li>
<p>otherwise, assume sitemap</p>
<ul><li>
<p>process some type of model in the following order of precedence depending
on configuration.</p>
<ul><li>
<p>process block if the controller was configured with a block, then, execute
the block and use the return value as the data source for values.</p>
</li><li>
<p>process model configured via the handler if a model class was assigned to
the handler, then, execute "all" method on the model and use the return
value as the data source for values.</p>
</li><li>
<p>model object automagically found by the sitemap_build method. the "all"
method is called on the model object.</p>
</li><li>
<p>first model object is never processed for the show method when the request
is via a sitemap. the reason is the show method is never called, therefore,
an instance of a model would not exist on the controller.</p>
</li></ul>
</li><li>
<p>the goal is ALWAYS to work with a list of model objects.  once a list has
been established, process all of the model objects in the list.</p>
<ul><li>
<p>for each object</p>
<ul><li>
<p>build a row Hash based copied from all of the values captured thus far.</p>
</li><li>
<p>call sitemap_capture_attributes on the model to obtain values and merge
them with the row Hash.</p>
</li><li>
<p>unless a canonical url has been obtained during any of the preceding steps,
build the canonical url based on the route and data source object found
during preceding steps.  segment keys are build via a call to
sitemap_capture_segments on the model.</p>
</li><li>
<p>add the row Hash to the return Array</p>
</li><li>
<p>do nothing to the meta tag instance variable.</p>
</li></ul>
</li></ul>
</li></ul>
</li><li>
<p>done.</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/duck_map/handlers/show.rb', line 65</span>

<span class='kw'>def</span> <span class='id identifier rubyid_sitemap_show'>sitemap_show</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rows'>rows</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='comment'># always start off with default values from config, then, simply overwrite them as we progress.
</span>  <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_sitemap_defaults'>sitemap_defaults</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

  <span class='comment'># show action never needs to call the existing show action.
</span>
  <span class='id identifier rubyid_lastmod'>lastmod</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_static_lastmod'>sitemap_static_lastmod</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:controller_name</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_lastmod'>lastmod</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
    <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:lastmod</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_lastmod'>lastmod</span>
  <span class='kw'>end</span>

  <span class='comment'># first, capture the values from the controller.
</span>  <span class='id identifier rubyid_attributes'>attributes</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_stripped_attributes'>sitemap_stripped_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_capture_attributes'>sitemap_capture_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_attributes'>attributes</span><span class='rparen'>)</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:source</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='symbol'>:meta_data</span>

    <span class='comment'># capture values from the first available model unless disabled.
</span>    <span class='id identifier rubyid_model_object'>model_object</span> <span class='op'>=</span> <span class='id identifier rubyid_sitemap_first_model'>sitemap_first_model</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='kw'>unless</span> <span class='id identifier rubyid_model_object'>model_object</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='id identifier rubyid_model_attributes'>model_attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_model_object'>model_object</span><span class='period'>.</span><span class='id identifier rubyid_is_sitemap_attributes_defined?'>is_sitemap_attributes_defined?</span>
        <span class='id identifier rubyid_model_attributes'>model_attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_model_object'>model_object</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_stripped_attributes'>sitemap_stripped_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='id identifier rubyid_values'>values</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_model_object'>model_object</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_capture_attributes'>sitemap_capture_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_model_attributes'>model_attributes</span><span class='rparen'>)</span><span class='rparen'>)</span>

    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>
      <span class='id identifier rubyid_route'>route</span> <span class='op'>=</span> <span class='const'>Rails</span><span class='period'>.</span><span class='id identifier rubyid_application'>application</span><span class='period'>.</span><span class='id identifier rubyid_routes'>routes</span><span class='period'>.</span><span class='id identifier rubyid_find_route_via_path'>find_route_via_path</span><span class='lparen'>(</span><span class='id identifier rubyid_request'>request</span><span class='period'>.</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_url_options'>url_options</span> <span class='op'>=</span> <span class='id identifier rubyid_sitemap_url_options'>sitemap_url_options</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_route'>route</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>_url</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_url_options'>url_options</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:loc</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:loc</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_values'>values</span><span class='rparen'>)</span>

    <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_meta_data'>sitemap_meta_data</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span>

  <span class='kw'>else</span>

    <span class='id identifier rubyid_data_rows'>data_rows</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

    <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:block</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

      <span class='id identifier rubyid_data_rows'>data_rows</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:block</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>

    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

      <span class='id identifier rubyid_data_rows'>data_rows</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span>

    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

      <span class='comment'># this model is not set by developer
</span>      <span class='comment'># it is set in code in sitemap_build using get_model_class
</span>      <span class='id identifier rubyid_data_rows'>data_rows</span> <span class='op'>=</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:model</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span>

    <span class='kw'>end</span>

    <span class='comment'># data_rows may have changed from an Array to a model object.
</span>    <span class='comment'># Make data_rows an Array if it has been switched to an model object.
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_data_rows'>data_rows</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_data_rows'>data_rows</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_data_rows'>data_rows</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

    <span class='comment'># only process the first row since we are processing the index action of the controller
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_data_rows'>data_rows</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_data_rows'>data_rows</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span> <span class='op'>&gt;</span> <span class='int'>0</span>

      <span class='id identifier rubyid_data_rows'>data_rows</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_data_row'>data_row</span><span class='op'>|</span>

        <span class='comment'># this is how we are overriding attributes defined on the controller with attributes
</span>        <span class='comment'># defined on the model.  The model attributes win!
</span>        <span class='comment'># same thing for segments below.
</span>        <span class='id identifier rubyid_model_attributes'>model_attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_attributes'>attributes</span>
        <span class='id identifier rubyid_segment_mappings'>segment_mappings</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:segments</span><span class='rbracket'>]</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_data_row'>data_row</span><span class='period'>.</span><span class='id identifier rubyid_is_sitemap_attributes_defined?'>is_sitemap_attributes_defined?</span>
          <span class='id identifier rubyid_model_attributes'>model_attributes</span> <span class='op'>=</span> <span class='id identifier rubyid_data_row'>data_row</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_stripped_attributes'>sitemap_stripped_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_segment_mappings'>segment_mappings</span> <span class='op'>=</span> <span class='id identifier rubyid_data_row'>data_row</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_attributes'>sitemap_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:action_name</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='symbol'>:segments</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_row_values'>row_values</span> <span class='op'>=</span> <span class='id identifier rubyid_values'>values</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_data_row'>data_row</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_capture_attributes'>sitemap_capture_attributes</span><span class='lparen'>(</span><span class='id identifier rubyid_model_attributes'>model_attributes</span><span class='rparen'>)</span><span class='rparen'>)</span>

        <span class='id identifier rubyid_url_options'>url_options</span> <span class='op'>=</span> <span class='id identifier rubyid_sitemap_url_options'>sitemap_url_options</span><span class='lparen'>(</span><span class='id identifier rubyid_row_values'>row_values</span><span class='rparen'>)</span>

        <span class='kw'>if</span> <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_blank?'>blank?</span>

          <span class='id identifier rubyid_segments'>segments</span> <span class='op'>=</span> <span class='id identifier rubyid_data_row'>data_row</span><span class='period'>.</span><span class='id identifier rubyid_sitemap_capture_segments'>sitemap_capture_segments</span><span class='lparen'>(</span><span class='id identifier rubyid_segment_mappings'>segment_mappings</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:route</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_segments'>segments</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:route</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>_url</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_url_options'>url_options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_segments'>segments</span><span class='rparen'>)</span><span class='rparen'>)</span>
          <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:loc</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span>

        <span class='kw'>else</span>
          <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:loc</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_row_values'>row_values</span><span class='lbracket'>[</span><span class='symbol'>:canonical</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>

        <span class='id identifier rubyid_rows'>rows</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_row_values'>row_values</span><span class='rparen'>)</span>

      <span class='kw'>end</span>

    <span class='kw'>end</span>

  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_sitemap_url_limit'>sitemap_url_limit</span><span class='lparen'>(</span><span class='id identifier rubyid_rows'>rows</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:handler</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Mon Feb 25 20:46:08 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.3 (ruby-1.9.3).
</div>

  </body>
</html>